import React, { useState, useEffect } from 'react';
import { ArrowRight, Play, Pause, Volume2, VolumeX } from 'lucide-react';

/**
 * AnimatedBackgroundContainer
 * * Menggunakan VIDEO sebagai "Live Wallpaper" background.
 */

const AnimatedBackgroundContainer = () => {
  const [isGradientBtnHovered, setIsGradientBtnHovered] = useState(false);
  
  // State untuk mengontrol video
  const [isPlaying, setIsPlaying] = useState(true);
  const [isMuted, setIsMuted] = useState(true);

  // Fungsi toggle play/pause
  const togglePlay = () => {
    const video = document.getElementById('bg-video');
    if (video) {
      if (isPlaying) video.pause();
      else video.play();
      setIsPlaying(!isPlaying);
    }
  };

  // Fungsi toggle mute
  const toggleMute = () => {
    const video = document.getElementById('bg-video');
    if (video) {
      video.muted = !isMuted;
      setIsMuted(!isMuted);
    }
  };

  return (
    <div className="relative w-full min-h-screen overflow-hidden bg-slate-950 font-sans text-white flex items-center justify-center p-4">
      
      {/* --- LAYER 1: GLOBAL BACKGROUND --- */}
      <div className="absolute inset-0 bg-neutral-950 z-0"></div>

      {/* --- LAYER 2: MAIN CARD SECTION --- */}
      <section
        className="relative z-10 w-full max-w-7xl h-[600px] border border-white/10 rounded-3xl overflow-hidden animate-scaleIn shadow-2xl group"
      >
        {/* =========================================================================
            BAGIAN LIVE WALLPAPER (VIDEO BACKGROUND)
           ========================================================================= */}
        <div className="absolute inset-0 z-0">
            <video
                id="bg-video"
                autoPlay
                loop
                muted={isMuted}
                playsInline
                className="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                poster="https://hoirqrkdgbmvpwutwuwj-all.supabase.co/storage/v1/object/public/assets/assets/c06498e9-85e2-4173-a1f6-86b1267897f0_1600w.jpg"
            >
                {/* Pastikan file "acheron-black-hole-honkai-star-rail-moewalls-com.mp4" 
                    sudah ada di folder "public" proyek Anda.
                */}
                <source 
                    src="/acheron-black-hole-honkai-star-rail-moewalls-com.mp4" 
                    type="video/mp4" 
                />
                Your browser does not support the video tag.
            </video>

            {/* Overlay Hitam Transparan */}
            <div className="absolute inset-0 bg-black/40 z-10"></div>
            
            {/* Overlay Gradient Tambahan */}
            <div className="absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-transparent z-10"></div>
        </div>
        
        {/* --- DECORATIVE TEXT "BRIND" --- */}
        <div className="absolute inset-0 overflow-hidden pointer-events-none z-20">
          <div aria-hidden="true" className="absolute bottom-[-20px] left-8 select-none opacity-10 mix-blend-overlay">
             <span className="block leading-none font-bold text-[180px] sm:text-[250px] text-white tracking-tighter">
               BRIND
             </span>
          </div>
        </div>

        {/* --- CONTENT GRID --- */}
        <div className="relative z-30 h-full flex items-center p-8 sm:p-12 lg:p-16">
          <div className="grid grid-cols-1 lg:grid-cols-12 gap-10 items-center w-full">
            
            {/* Left Column: Text Content */}
            <div className="lg:col-span-7 space-y-8">
              <h1 className="text-5xl sm:text-6xl md:text-7xl leading-[1.05] font-light text-white tracking-tighter animate-fadeInLeft animation-delay-300 drop-shadow-xl">
                Experience the <br/>
                <span className="font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">
                    Event Horizon
                </span>
              </h1>
              
              <p className="text-lg text-neutral-300 max-w-xl animate-fadeInRight animation-delay-400 leading-relaxed shadow-black drop-shadow-md">
                Dive into immersive digital realms. Our animated backgrounds bring your content to life, creating unforgettable user experiences.
              </p>
              
              <div className="flex flex-wrap gap-5 animate-fadeInUp animation-delay-500 pt-4">
                
                {/* Button 1 */}
                <a 
                  href="#explore"
                  className="group relative inline-flex items-center justify-center p-[2px] rounded-lg transition-transform active:scale-95 hover:scale-105 duration-200"
                  style={{
                    backgroundImage: 'linear-gradient(144deg, rgb(175, 64, 255), rgb(91, 66, 243) 50%, rgb(0, 221, 235))',
                    boxShadow: '0 0 20px rgba(91, 66, 243, 0.3)'
                  }}
                  onMouseEnter={() => setIsGradientBtnHovered(true)}
                  onMouseLeave={() => setIsGradientBtnHovered(false)}
                >
                  <span 
                    className="flex items-center gap-2 px-8 py-3.5 rounded-[6px] text-sm font-medium text-white transition-colors duration-300 w-full justify-center"
                    style={{ background: isGradientBtnHovered ? 'transparent' : '#0a0a0a' }}
                  >
                    Start Journey
                  </span>
                </a>

                {/* Button 2 */}
                <a 
                  href="#gallery"
                  className="group inline-flex items-center justify-center px-8 py-3.5 text-sm font-medium text-white border border-white/20 bg-white/5 rounded-lg hover:bg-white/10 hover:border-white/30 active:scale-95 transition-all duration-200 backdrop-blur-sm"
                >
                  <span className="flex items-center gap-2">
                    View Gallery
                    <ArrowRight className="w-4 h-4 transition-transform group-hover:translate-x-1" />
                  </span>
                </a>

              </div>
            </div>

            {/* Right Column: Controls */}
            <div className="lg:col-span-5 flex justify-end items-end h-full pb-10">
                <div className="flex gap-2 bg-black/30 backdrop-blur-md p-2 rounded-full border border-white/10">
                    <button 
                        onClick={togglePlay}
                        className="p-2 hover:bg-white/20 rounded-full transition-colors text-white/80 hover:text-white"
                        title={isPlaying ? "Pause Background" : "Play Background"}
                    >
                        {isPlaying ? <Pause size={20} /> : <Play size={20} />}
                    </button>
                    <button 
                        onClick={toggleMute}
                        className="p-2 hover:bg-white/20 rounded-full transition-colors text-white/80 hover:text-white"
                        title={isMuted ? "Unmute" : "Mute"}
                    >
                        {isMuted ? <VolumeX size={20} /> : <Volume2 size={20} />}
                    </button>
                </div>
            </div>

          </div>
        </div>
      </section>

      {/* --- CSS ANIMATIONS --- */}
      <style>{`
        @keyframes scaleIn {
          0% { opacity: 0; transform: scale(0.95) translateY(10px); }
          100% { opacity: 1; transform: scale(1) translateY(0); }
        }
        @keyframes fadeInLeft {
          from { opacity: 0; transform: translateX(-20px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes fadeInRight {
          from { opacity: 0; transform: translateX(20px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes fadeInUp {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-scaleIn { animation: scaleIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-fadeInLeft { animation: fadeInLeft 1s ease-out forwards; }
        .animate-fadeInRight { animation: fadeInRight 1s ease-out forwards; }
        .animate-fadeInUp { animation: fadeInUp 1s ease-out forwards; }
        .animation-delay-300 { animation-delay: 0.3s; animation-fill-mode: both; }
        .animation-delay-400 { animation-delay: 0.4s; animation-fill-mode: both; }
        .animation-delay-500 { animation-delay: 0.5s; animation-fill-mode: both; }
      `}</style>
    </div>
  );
};

export default AnimatedBackgroundContainer;
